> 👩‍💻 프로젝트에서 어떤 암호화를 쓸 것인지 고민하다가 Bcrypt를 사용하도록 해 Bcrypt가 무엇인지에 대해 작성해보겠다!

# Bcrypt
> 단방향 암호화를 위해 만들어진 해시 함수

## 🙋‍♀️ 오늘 공부할 것은?
* 단방향 암호화
* 단방향 암호화 한계
  * 솔팅
  * 키 스트레칭
* FastAPI에 적용하기

## 해시 함수
<p align="center">
  <img src="./img/해시.png">
</p>

1. 임의의 데이터를 고정된 길이(압축 함수)로 매핑하는 함수
2. 동일한 입력값에 대한 동일한 출력값
3. 입력값이 약간 변경되어도 다른 출력값

## 단방향 암호화
<p align="center">
  <img src="./img/단방향암호.png">
</p>

* 한쪽 방향으로 암호화를 한다는 것을 의미한다.
  * 즉, 암호화만 가능하고 복호화는 할 수 없다.
* 비밀번호를 단방향 암호화 방식으로 저장하는 경우 패스워드 DB가 유출되어도 안전하다.
* 패스워드를 검증할 때에는 사용자로부터 입력받은 비밀번호를 똑같은 방식으로 암호화하여 암호화된 패스워드끼리 비교한다.
* 그래서 비밀번호를 잊어버리면 찾기가 불가능해 새로운 비밀번호를 입력해야 한다.
  * 비밀번호 변경 메일
  * SMS인증

### 🤔 왜 양방향이 아닌 단방향을 선택했는지
> 양방향은 키를 사용하여 암호화 및 복호화를 할 수 있다.  즉, 키가 유출되지 않도록 관리해야 하기 때문에 유출될 걱정이 필요없는 단방향을 선택했다.

### 💡 궁금한점 - 복호화가 왜 불가능?
>수학적으로 불가능하다!<br>
대부분의 단방향 암호화 함수는 수학적으로 역함수를 찾기 어렵도록 설계되어 있다. 이는 주어진 암호문으로부터 원문을 복구하는 것이 매우 어렵다는 것을 의미! 

## 🔓 단방향 암호화의 한계

### 🌈 Rainbow Table
> 위에서 해시 함수는 동일한 입력값에는 동일한 출력값을 준다고 했다. 이를 이용해 해시 함수를 사용하여 변환 가능한 모든 해시 값을 저장시켜 놓은 표를 말한다.

#### 💡 그래서 사용하는 것이 salt
<p align="center">
  <img src="./img/salt.png">
</p>

> 비밀번호에 임의의 문자열인 salt를 추가하여 출력값을 생성하기 때문에 비밀번호가 단순하더라도 레인보우 테이블에서 찾을 수 없다.<br>
*salt는 최소 128bit정도는 되어야 안전하다고 한다.

### 🧩 Brute Force 공격 (무차별 대입 공격)
> 해시 함수는 원래 빠른 데이터의 검색을 목적으로 만들어졌기 때문에 해커는 빠른 속도로 임의의 문자열의 출력값과 해킹할 대상의 출력값을 비교할 수 있다.

#### 💡 그래서 사용하는 것이 키 스트레칭
<p align="center">
  <img src="./img/키스트레칭.png" width=300>
</p>

> 해싱을 여러 번 반복하여 시간을 늘림으로써 무차별 대입 공격에 대비하는 것이다.

### 참고자료
* [해시함수](https://medium.com/curg/%EC%95%94%ED%98%B8%ED%95%99-chf-cryptographic-hash-function-%EC%95%94%ED%98%B8%ED%99%94-%ED%95%B4%EC%8B%9C-%ED%95%A8%EC%88%98-%EB%A9%94%EC%BB%A4%EB%8B%88%EC%A6%98-8e157ff89296)
* [단방향 암호화](https://hyunseo-fullstackdiary.tistory.com/127)